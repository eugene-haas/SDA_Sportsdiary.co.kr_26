<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge, Chrome=1">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="-1">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=no">
    <title>스포츠 다이어리</title>
    <meta name="apple-mobile-web-app-title" content="스포츠 다이어리">
    <!-- font-awesome -->
    <link rel="stylesheet" type="text/css" href="css/library/font-awesome.min.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-theme.css">
    <!-- custom css -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- 레슬링협회 운영시스템 -->
    <link rel="stylesheet" href="css/style_wrestling.css">
    <script src="js/library/jquery-1.12.2.min.js"></script>
    <script src="js/jquery.oLoader.min.js"></script><!--로딩바-->
    <script type='application/javascript' src='js/fastclick.js'></script><!--클릭반응속도up-->
    <script src="js/bootstrap.js"></script>

    <script src="js/global.js"></script>
    <script>
    /*script 시작부 로 검색*/

      if ('addEventListener' in document) {
          document.addEventListener('DOMContentLoaded', function() {
              FastClick.attach(document.body);
          }, false);
      }

      /*--------------------$(document).ready(function()--------------------*/
      $(document).ready(function()
      {
        //해당라운드 스코어 조회해야할 정보 가져오기 (localStorage 정보)
        var varGameTitleIDX = localStorage.getItem("GameTitleIDX");
        var varTeamGb = localStorage.getItem("TeamGb");
        var varSex = localStorage.getItem("Sex");
        var varLevel = localStorage.getItem("Level");
        var varGroupGameGb = localStorage.getItem("GroupGameGb");
        var varPlayerGameNum = localStorage.getItem("PlayerGameNum");
        var varPlayRound = parseInt(localStorage.getItem("PlayRound"));

        var varGroupGameNum = localStorage.getItem("GroupGameNum");
        var varGroupRound = localStorage.getItem("GroupRound");

        //페이지 진입시 선택된 값 리셋
        localStorage.setItem("LJGubun","");
        localStorage.setItem("LJJumsu","");
        localStorage.setItem("SkillLeftRight","");


        //개인전일때 양선수 불참버튼, 단체전일때 무승부 버튼으로 바뀜
        if(localStorage.getItem("GroupGameGb") == "sd040001"){
          $("#DP_DualResult_Text").html("불참");
          $("#LRResult_Draw").attr("class", "tgClass no-attend");
          
        }
        else{
          $("#DP_DualResult_Text").html("무승부");   
          $("#LRResult_Draw").attr("class", "tgClass draw");          
        }

        //S:해당경기 정보가져오기
        function loadgametitle(){
          var defer = $.Deferred();

          var obj = {};

          obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
          obj.TeamGb = localStorage.getItem("TeamGb");
          obj.Sex = localStorage.getItem("Sex");
          obj.Level = localStorage.getItem("Level");
          obj.GroupGameGb = localStorage.getItem("GroupGameGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.SportsGb = localStorage.getItem("SportsGb");
          obj.GroupGameNum = localStorage.getItem("GroupGameNum");

          var jsonData = JSON.stringify(obj);

          var events = "";

          $.ajax({
            url: '/GGame/GGameTitle.ashx',
            type: 'post',
            data: jsonData,
            async:false,
            success: function (sdata) {

              var myArr = JSON.parse(sdata);

              if (myArr.length > 0){

                //타이틀
                $("#DP_play-title").html(myArr[0].GameTitleName);
                //개인전
                $("#DP_play-division").html(myArr[0].GroupGameGbName);
                //고등학교
                $("#DP_play-belong").html(myArr[0].TeamGbName);
                //남자
                $("#DP_play-type").html(myArr[0].SexName + " " + myArr[0].LevelName );
                //16강
                $("#DP_play-round").html(myArr[0].TotRoundName + "강");
                //라운드
                $("#DP_play-num").html(varPlayerGameNum + "경기");

                localStorage.setItem("RGameLevelidx",myArr[0].RGameLevelidx);
              }
              else{
                alert('진행 중인 경기 정보가 없습니다.');
              }

              defer.resolve(sdata);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
            return defer.promise();           
        }
        //E:해당대회 날짜 가져오기

        //S:해당경기 정보가져오기
        var loadscore=function(){

            var defer = $.Deferred();

            var obj = {};

            obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
            obj.TeamGb = localStorage.getItem("TeamGb");
            obj.Sex = localStorage.getItem("Sex");
            obj.Level = localStorage.getItem("Level");
            obj.GroupGameGb = localStorage.getItem("GroupGameGb");
            obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
            obj.SportsGb = localStorage.getItem("SportsGb");
            obj.GroupGameNum = localStorage.getItem("GroupGameNum");

            var jsonData = JSON.stringify(obj);

            var events = "";

            var arrayWinplayer = winplayer_select();  //승리한 선수 가져오기

            $.ajax({
                url: '/GGame/GGameScoreDetail.ashx',
                type: 'post',
                data: jsonData,
                async:false,
                success: function (sdata) {
                  
                  var myArr = JSON.parse(sdata);

                  //양선수 무승부 및 부전패 일때는 불참자로 처리한다.
                  var varNojoin1_PlayerIDX = "";
                  var varNojoin2_PlayerIDX = "";
                  var varNojoin1_PlayerNum = 0;
                  var varNojoin2_PlayerNum = 0;
                  var varNojoin1_SchIDX = "22369";
                  var varNojoin2_SchIDX = "22369";
                  var varNojoin1_UserName = "불참자";
                  var varNojoin2_UserName = "불참자";

                  if(localStorage.getItem("Sex") == "Man"){
                    //남자불참자 IDX
                    varNojoin1_PlayerIDX = "1496";
                    varNojoin2_PlayerIDX = "1499";
                  }
                  else{
                    //여자불참자 IDX
                    varNojoin1_PlayerIDX = "1497";                      
                    varNojoin2_PlayerIDX = "1500";
                  }

                  if (myArr.length > 0){

                    //이전 경기가 양선수불참, 양선수무승부일때 선수목록이 myArr.length 1로 나옴 
                    if (myArr.length == 1)
                    {

                      var loadListdetail = $.when(playercntcheck());  

                      //도복 색상(도복색상에 따라 선수위치(Left, Right)가 다름)
                      var teamcolor = "";
                      var listnum = "";

                      /*
                        2016-12-29 예정 작업

                        SELECT * 
                        FROM SportsDiary.dbo.tblRPlayer A
                        WHERE A.RGameLevelidx = '6' 
                        AND 
                          (
                            Game1R = '5' OR
                            Game2R = '5' OR
                            Game3R = '5' OR
                            Game4R = '5' OR
                            Game5R = '5' OR
                            Game6R = '5'
                          )
                        AND A.DelYN = 'N'     
                        
                        1.위 쿼리의 COUNT를 가져온다
                        2.위 쿼리의 ROW를 For문으로 돌면서, myArr[0].PlayerIDX가 위 쿼리의 COUNT의 나누기 2한 숫자보다 작으면 도복흰색, 크면 도복 파란색
                        3.상대편 선수정보
                          - PlayerIDX : 1496, SchIDX : 22369, UserName : 불참자, Sex : Man
                          - PlayerIDX : 1497, SchIDX : 22369, UserName : 불참자, Sex : WoMan

                          ※ 상대편선수번호
                           - myArr[0].PlayerIDX 가 흰색도복일때, 연산 myArr[0].PlayerIDX 선수번호 + 100;
                           - myArr[0].PlayerIDX 가 파란도복일때, 연산 myArr[0].PlayerIDX 선수번호 - 100;

                           흰색도복 : L
                           흰색도복 : R


                        --------------------------------------------------

                        경기진행 중 은 경기종료(tblRGameResult)된게있으면 경기시작버튼 안나오게..

                      */
                    
                      loadListdetail.done(function(sdata1) {    

                        var j = 0;

                        var myArr1 = JSON.parse(sdata1);

                        if (myArr1.length > 0){

                          for (var j = 0; j < myArr1.length; j++)
                          {

                            if(myArr[0].PlayerIDX == myArr1[j].PlayerIDX)
                            {
                              //myArr1.length / 2;
                              listnum = j;
                              break;

                            }
                            else{
                              listnum = 0;
                            }

                          }  

                        }
                        else{
                          listnum = 0;
                        }

                        //도복색 결정
                        if ( (myArr1.length / 2) > listnum )
                        {
                          teamcolor = "white";
                        }
                        else{
                          teamcolor = "blue";
                        }

                      });


                      if(teamcolor == "white"){

                        $("#DP_player-name_Up").html(myArr[0].UserName + "<span>(" + myArr[0].SchoolName + ")</span>");
                        $("#DP_player-name_Down").html(varNojoin1_UserName);

                        localStorage.setItem("LPlayerIDX",myArr[0].PlayerIDX);
                        localStorage.setItem("LPlayerNum",myArr[0].PlayerNum);
                        localStorage.setItem("LSchIDX",myArr[0].SchIDX);
                        localStorage.setItem("LPlayerName",myArr[0].UserName);

                        localStorage.setItem("RPlayerIDX",varNojoin1_PlayerIDX);
                        localStorage.setItem("RPlayerNum",varNojoin1_PlayerNum);
                        localStorage.setItem("RSchIDX",varNojoin1_SchIDX);
                        localStorage.setItem("RPlayerName",varNojoin1_UserName);

                      }
                      else{

                        $("#DP_player-name_Up").html(varNojoin1_UserName);
                        $("#DP_player-name_Down").html(myArr[0].UserName + "<span>(" + myArr[0].SchoolName + ")</span>");

                        localStorage.setItem("LPlayerIDX",varNojoin1_PlayerIDX);
                        localStorage.setItem("LPlayerNum",varNojoin1_PlayerNum);
                        localStorage.setItem("LSchIDX",varNojoin1_SchIDX);
                        localStorage.setItem("LPlayerName",varNojoin1_UserName);

                        localStorage.setItem("RPlayerIDX",myArr[0].PlayerIDX);
                        localStorage.setItem("RPlayerNum",myArr[0].PlayerNum);
                        localStorage.setItem("RSchIDX",myArr[0].SchIDX);
                        localStorage.setItem("RPlayerName",myArr[0].UserName);                      
                      }


                    }
                    //정상경기 myArr.length 2
                    else
                    {

                      //선수명
                      $("#DP_player-name_Up").html(myArr[0].UserName + "<span>(" + myArr[0].SchoolName + ")</span>");
                      $("#DP_player-name_Down").html(myArr[1].UserName + "<span>(" + myArr[1].SchoolName + ")</span>");
                      //스코어보드 선수명
                      $("#DP_ScorePname_Up").html(myArr[0].UserName);
                      $("#DP_ScorePname_Down").html(myArr[1].UserName);
                      
                      //승리한 선수가 있다면..
                      if(arrayWinplayer[0] != ""){
                        $("#WinPlayer").append("<option value='"+ arrayWinplayer[0] +"'>"+ arrayWinplayer[1] +"</option>");
                      }
                      else{
                        $("#WinPlayer").append("<option value='' selected>승자 선수 선택</option>");
                        $("#WinPlayer").append("<option value='"+ myArr[0].PlayerIDX +"'>"+ myArr[0].UserName +"</option>");
                        $("#WinPlayer").append("<option value='"+ myArr[1].PlayerIDX +"'>"+ myArr[1].UserName +"</option>");                      
                      }
                      
                      //양선수의 IDX 및 출전번호
                      localStorage.setItem("LPlayerIDX",myArr[0].PlayerIDX);
                      localStorage.setItem("LPlayerNum",myArr[0].PlayerNum);
                      localStorage.setItem("RPlayerIDX",myArr[1].PlayerIDX);
                      localStorage.setItem("RPlayerNum",myArr[1].PlayerNum);
                      localStorage.setItem("LSchIDX",myArr[0].SchIDX);
                      localStorage.setItem("RSchIDX",myArr[1].SchIDX);
                      localStorage.setItem("LPlayerName",myArr[0].UserName);
                      localStorage.setItem("RPlayerName",myArr[1].UserName);

                    }

                    nowscore();       //현재점수 불러오기
                    nowdualresult(); //양선수 부전패,무승부인지 불러오기
            
                    //loadplaylog(); //유도 로그가져오기                    

                  } 
                  
                  //부전패로 올라와서 아무도 조회가 안될때
                  else {



                    $("#DP_player-name_Up").html(varNojoin1_UserName);
                    $("#DP_player-name_Down").html(varNojoin2_UserName);

                    localStorage.setItem("LPlayerIDX",varNojoin1_PlayerIDX);
                    localStorage.setItem("LPlayerNum",varNojoin1_PlayerNum);
                    localStorage.setItem("LSchIDX",varNojoin1_SchIDX);
                    localStorage.setItem("LPlayerName",varNojoin1_UserName);

                    localStorage.setItem("RPlayerIDX",varNojoin2_PlayerIDX);
                    localStorage.setItem("RPlayerNum",varNojoin2_PlayerNum);
                    localStorage.setItem("RSchIDX",varNojoin2_SchIDX);
                    localStorage.setItem("RPlayerName",varNojoin2_UserName);
                  }

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise();
        }
        //E:해당 라운드의 스코어 가져오기

        //S:해당대회 날짜 가져오기
        function playercntcheck(){
          var defer = $.Deferred();

          var obj = {};

          obj.RGameLevelidx = localStorage.getItem("RGameLevelidx");
          obj.GroupGameNum = localStorage.getItem("GroupGameNum");
          obj.GameNum = localStorage.getItem("PlayerGameNum");

          var jsonData = JSON.stringify(obj);

          var events = "";

          $.ajax({
            url: '/GGame/GGamePlayerCntCheck.ashx',
            type: 'post',
            data: jsonData,
            async:false,
            success: function (sdata1) {

              var myArr1 = JSON.parse(sdata1);
            
              defer.resolve(sdata1);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
            return defer.promise();           
        }
        //E:해당대회 날짜 가져오기

        //S:유도 경기결과 (승리종류) 가져오기
        var loadwin=function(){
            var defer = $.Deferred();

            var obj = {};

            obj.SportsGb = localStorage.getItem("SportsGb");
            obj.PPubCode = "sd023";
            obj.PubCode = "sd023005,sd023006,sd023007,sd023008";

            var jsonData = JSON.stringify(obj);

            var events = "";

            var arrayWinplayer = winplayer_select();  //승리한 선수 가져오기

            $.ajax({
                url: '/management/DirPPubCodeList_Search.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {
                  
                  var myArr = JSON.parse(sdata);

                  if (myArr.length > 0){
                    
                    //승리한 선수가 있다면

                    $("#L_gameresult").append("<option value='' selected>선택</option>");
                    $("#R_gameresult").append("<option value='' selected>선택</option>");
                    for (var i = 0; i < myArr.length; i++)
                    {
                      var varPubCode = myArr[i].PubCode;
                      var varPubName = myArr[i].PubName;
                      var varPPubCode = myArr[i].PPubCode;
                      var varPPubName = myArr[i].PPubName;
                      var varOrderBy = myArr[i].OrderBy;

                      $("#L_gameresult").append("<option value='"+ varPubCode +"'>"+ varPubName +"</option>");
                      $("#R_gameresult").append("<option value='"+ varPubCode +"'>"+ varPubName +"</option>");
                    }       
                    // selectBox 선택시 배경 변경
                    $('.point-display').selectBox('.select-box');
          
                  } else {
                    
                    var varMessage="<span style='font-size:12px;'>해당기간에 맞는 승률이 없습니다.</span>";
                  }

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise();
        }
        //E:유도 경기결과 (승리종류) 가져오기

        //S:현재 경기상태 조회
        function load_gamestatus(){
            var defer = $.Deferred();

            var obj = {};

            obj.SportsGb = localStorage.getItem("SportsGb");
            obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
            obj.RGameLevelidx = localStorage.getItem("RGameLevelidx");
            obj.GroupGameNum = localStorage.getItem("GroupGameNum");
            obj.GameNum = localStorage.getItem("PlayerGameNum");

            var jsonData = JSON.stringify(obj);

            $.ajax({
                url: '/GGame/GGameNowGameStatus.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {

                  var myArr = JSON.parse(sdata);

                  if (myArr.length > 0){
                    
                    $("#btn_gamestart").css("display","none");
                    $("#btn_gameend").css("display","block");

                    //경기 진행중

                    $("#StadiumNumber").val(myArr[0].StadiumNumber);

                    localStorage.setItem("GameProgress",myArr[0].GameStatus);
                  } 
                  
                  else {
                    
                    $("#btn_gamestart").css("display","block");
                    $("#btn_gameend").css("display","none");

                    //경기 진행중이지 않음
                    localStorage.setItem("GameProgress","");
                  }

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise();       
        }
        //E:현재 경기상태 조회

        //S:유도 기술정보가져오기
        function load_skill(strSkillnm,strSkillCd,objnm){
            var defer = $.Deferred();

            var obj = {};

            obj.SportsGb = localStorage.getItem("SportsGb");
            obj.PPubCode = strSkillCd; //손기술

            var jsonData = JSON.stringify(obj);

            var events = "";


            $.ajax({
                url: '/Management/DirPubCodeList_spec.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {

                  var myArr = JSON.parse(sdata);

                  var strhandskill = "<dt>" + strSkillnm + "</dt>"

                  if (myArr.length > 0){
                    
                    for (var i = 0; i < myArr.length; i++){
                      strhandskill += strhandskill = "<dd><label name='label_skill_list'>"
                      strhandskill += strhandskill = "<input type='checkbox' name='skill_list' value='" + myArr[i].PubCode + "'>"
                      strhandskill += strhandskill = myArr[i].PubName
                      strhandskill += strhandskill = "</label></dd>"

                    }
    
                    $(objnm).html(strhandskill);
                    
                    $('.skill-group').radioInput('.skill-group input');

                    //체크박스
                    //$('.skill-group').radioInput();

                  } else {
                    
                    var varMessage="<dd><label>등록된 기술이 없습니다.</label></dd>";
                  }

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise();       
        }
        //E:유도 기술정보가져오기

        //S:심판싸인 저장(modal팝업의 승인완료버튼)
        function sign_insert(strimage, strsigngubun){
            var defer = $.Deferred();

            var obj = {};

            obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
            obj.TeamGb = localStorage.getItem("TeamGb");
            obj.Sex = localStorage.getItem("Sex");
            obj.Level = localStorage.getItem("Level");
            obj.GroupGameGb = localStorage.getItem("GroupGameGb");
            obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
            obj.SportsGb = localStorage.getItem("SportsGb");
            obj.SignData = strimage;
            obj.Signgubun = strsigngubun;

            var jsonData = JSON.stringify(obj);

            var events = "";


            $.ajax({
                url: '/GGame/GGameSignUpdate.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {


                  /*
                  var myArr = JSON.parse(sdata);


                  
                  if (myArr.length > 0){
                    
                    

                  } else {
                    
                    var varMessage="<dd><label>등록된 기술이 없습니다.</label></dd>";
                  }
                  */

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise();           
        }
        //E:심판싸인 저장(modal팝업의 승인완료버튼)


        //S:심판 싸인가져오기
        function loadsign(){
            var defer = $.Deferred();

            var obj = {};

            obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
            obj.TeamGb = localStorage.getItem("TeamGb");
            obj.Sex = localStorage.getItem("Sex");
            obj.Level = localStorage.getItem("Level");
            obj.GroupGameGb = localStorage.getItem("GroupGameGb");
            obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
            obj.GroupGameNum = localStorage.getItem("GroupGameNum");
            obj.SportsGb = localStorage.getItem("SportsGb");

            var jsonData = JSON.stringify(obj);

            var events = "";


            $.ajax({
                url: '/GGame/GGameSignSelect.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {

                  var myArr = JSON.parse(sdata);

                  if (myArr.length > 0){

                    //주심1 싸인
                    if (myArr[0].ChiefSign != "")
                    {
                      
                      /*
                      $("<img>", {
                       src: myArr[0].ChiefSign,
                       width:188,
                       height:69,
                       onload: function(){console.log("img loaded..");
                      }
                      }).appendTo("#chiefSign_copy");
                      */
                      
                      $("#chiefSign_copy").html("");
                      $("#chiefSign_copy").html("<img src='" + myArr[0].ChiefSign + "' width='188' height='69'>");

                      $("#btn_chiefSign").css("display","none");
                      $("#result_chiefSign").css("display","block");
                    }
                    else{

                      $("#btn_chiefSign").css("display","block");
                      $("#result_chiefSign").css("display","none");                   
                    }


                    //부심1 싸인
                    if (myArr[0].AssChiefSign1 != "")
                    {
                      /*
                      $("<img>", {
                       src: myArr[0].AssChiefSign1,
                       width:188,
                       height:69,
                       onload: function(){console.log("img loaded..");
                      }
                      }).appendTo("#asschiefSign1_copy");
                      */

                      $("#asschiefSign1_copy").html("");
                      $("#asschiefSign1_copy").html("<img src='" + myArr[0].AssChiefSign1 + "' width='188' height='69'>");

                      $("#btn_asschiefSign1").css("display","none");
                      $("#result_asschiefSign1").css("display","block");
                    }
                    else{

                      $("#btn_asschiefSign1").css("display","block");
                      $("#result_asschiefSign1").css("display","none");                   
                    }



                    //부심2 싸인
                    if (myArr[0].AssChiefSign2 != "")
                    {
                      /*
                      $("<img>", {
                       src: myArr[0].AssChiefSign2,
                       width:188,
                       height:69,
                       onload: function(){console.log("img loaded..");
                      }
                      }).appendTo("#asschiefSign2_copy");
                      */

                      $("#asschiefSign2_copy").html("");
                      $("#asschiefSign2_copy").html("<img src='" + myArr[0].AssChiefSign2 + "' width='188' height='69'>");

                      $("#btn_asschiefSign2").css("display","none");
                      $("#result_asschiefSign2").css("display","block");
                    }
                    else{

                      $("#btn_asschiefSign2").css("display","block");
                      $("#result_asschiefSign2").css("display","none");                   
                    }
                  } 
                  
                  else {
                    
                  }

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise();       
        }
        //E:심판 싸인가져오기

        
        /*script 시작부*/

        //skillleftright_info('sd030001'); //페이지 첫진입시 좌측기술로 default
        
        $("#btn_rightskill").trigger("click");
        
        loadgametitle(); //해당 경기정보
        loadscore();  //해당 라운드 스코어가져오기
        
        loadwin(); //승패

        loadwinresult(); //해당 판정 불러오기
        
        loadplaylog(); //유도 로그

        //각 기술 가져오기
        load_skill("손기술","sp001","#DP_hand-skill");       
        load_skill("발기술","sp003","#DP_foot-skill");       
        load_skill("허리기술","sp002","#DP_waist-skill");       
        load_skill("누우며 메치기","sp004","#DP_lie-skill");        
        //load_skill("되치기","sp006","#DP_counterattack-skill");
        load_skill("굳히기","sp005","#DP_hold-skill");
        
        loadsign(); //심판싸인 불러오기

        load_gamestatus(); //현재경기 진행상태 조회

        /*script 시작부*/

    
        /*--------------------싸인관련--------------------*/
         var canvas = document.getElementById('game_signature');
         //canvas.width = screen.width;
         var context = canvas.getContext('2d');
         context.lineWidth=10;
         context.lineCap="round";

         $(canvas).bind({"touchstart mousedown": function(event){
          
          event.preventDefault();
          
          if(event.type == 'touchstart'){
           event = event.originalEvent.targetTouches[0];
          }
          
          $(this).data("flag", "1");
          var position = $(this).offset();
          var x = event.pageX - position.left;
          var y = event.pageY - position.top;
          console.log("start x: " + x + ", y: " + y);
          context.beginPath();
          context.moveTo(x,y);

         }, "mousemove touchmove" : function(event) {
          
          event.preventDefault();
          
          if(event.type == 'touchmove'){
           event = event.originalEvent.targetTouches[0];
          }  

          var flag = $(this).data("flag");
          if(flag == 1){
           var position = $(this).offset();
           var x = event.pageX - position.left;
           var y = event.pageY - position.top; 
           
           //console.log("move x: " + x + ", y: " + y);
          }
          context.lineTo(x, y);
          context.stroke();
         }, "mouseup touchend mouseleave" : function(event) {
          
          event.preventDefault();

          console.log("type: " + event.type);
          if(event.type == 'touchend'){
           event = event.originalEvent.changedTouches[0];   
          }   

          $(this).data("flag", "0");
          var position = $(this).offset();
          
          var x = event.pageX - position.left;
          var y = event.pageY - position.top; 
          
          console.log("end: " + x + ", y: " + y);

         //  context.lineTo(x, y);
         //  context.stroke();
         }
         
         }); 

         $("#id_clear").click(function(){
          canvas.width = canvas.width;
          context.lineWidth=10;
          context.lineCap="round";
         });

         //싸인 승인완료
         $("#signature_copy").click(function(){

          //var imageData = context.getImageData(0,0,canvas.width, canvas.height);
          //var data = imageData.data;

          //console.log(canvas.width + ": " + canvas.height);

          /*
          var canvasCopy = document.createElement("canvas");
          var copyContext = canvasCopy.getContext("2d");
          
          var w = 80;
          var h = 50;
          canvasCopy.width = w;
          canvasCopy.height = h;

          copyContext.drawImage(canvas, 0, 0, w, h);

          */
          var pngUrl = canvas.toDataURL();
          //var copyPngUrl = canvasCopy.toDataURL();

          /*
          console.log("원본이미지 사이즈: " + pngUrl.length);
          console.log("스몰이미지 사이즈: " + copyPngUrl.length);

          console.log("url type: " + typeof(copyPngUrl));
          console.log("스몰이미지 url: " + copyPngUrl);
          console.log("스몰이미지 url: " + copyPngUrl.replace("data:image/png;base64,", ""));
          */

          //해당 싸인 DB Insert
          sign_insert(pngUrl, $("#game_signature").attr("data-id") );

          if($("#game_signature").attr("data-id") == "chiefSign"){
            id_signcopy = "#chiefSign_copy";

            $("#btn_chiefSign").css("display","none");
            $("#result_chiefSign").css("display","block");
          }
          else if($("#game_signature").attr("data-id") == "asschiefSign1"){
            id_signcopy = "#asschiefSign1_copy";

            $("#btn_asschiefSign1").css("display","none");
            $("#result_asschiefSign1").css("display","block");
          }
          else if($("#game_signature").attr("data-id") == "asschiefSign2"){
            id_signcopy = "#asschiefSign2_copy";

            $("#btn_asschiefSign2").css("display","none");
            $("#result_asschiefSign2").css("display","block");
          }

          $(id_signcopy).html("");
          $(id_signcopy).html("<img src='"+pngUrl+"' width='188' height='69'>");


          /*
          $("<img>", {

           src: pngUrl,
           width:188,
           height:69,
           onload: function(){console.log("img loaded..");}

          }).appendTo(id_signcopy);
          */

          $('#sign-modal').modal('hide');

          //캔버스삭제
          canvas.width = canvas.width;
          context.lineWidth=10;
          context.lineCap="round";

        

          //delete canvasCopy;
         });
        /*--------------------싸인관련--------------------*/

        /*--------------------싸인모달 띄울때--------------------*/
        $('#sign-modal').on('show.bs.modal', function (event) {

          var arrayWinplayer = winplayer_select();

          if(arrayWinplayer[0] == ""){
            alert('해당 라운드 승패 결정 후, 승인 가능합니다.');
            $('#sign-modal').modal('hide');
            return false;
          }

         //클릭 이벤트된 버튼 obj
         var button = $(event.relatedTarget); 

         //클릭 이벤트된 버튼 data-whatever의 value
         var strbutton_data = button.data('whatever');
          
         //캔버스의 data-id에 값 입력
         $("#game_signature").attr("data-id", strbutton_data);

        });
        

      });
      /*--------------------$(document).ready(function()--------------------*/

        //S:기술 입력
        function insert_gamedtl(){
          
          var defer = $.Deferred();

          var varskilllist = "";

          
          //                  $('.injury-mark').tgClass('.injury-mark label');
          //                  $('.score-enter-main').tgClass('.tgClass a');
          //                   var a = $('#OverTime').is(':checked');
           //console.log("test:"+ $("#OverTime").typeOf(":checked"));
          // console.log("test-" + $(a).typeof());


          //게임 승패 가져오기
          var arrayWinplayer = winplayer_select();

          if (localStorage.getItem("GameProgress") == "")
          {
            alert("점수 입력은 경기 시작 후, 입력 가능합니다.");
            return;
          }


          /*경기테스트로 인한 임시 권한해제
          if(arrayWinplayer[0] != ""){
            alert("승패가 확정된 게임은 스코어입력을 하실 수 없습니다.");
            return;
          }
          */

          //현재 한판1 OR 지도4회 일 경우, 스코어 입력이 안되게..
          if(
            parseInt($("#LJumsuGb1").html()) >= 1 ||
            parseInt($("#RJumsuGb1").html()) >= 1 ||
            parseInt($("#LJumsuGb4").html()) >= 4 ||
            parseInt($("#RJumsuGb4").html()) >= 4 )
          {
            alert('한판 1회,지도4회 판정이 있을 경우, 점수 입력을 하실 수 없습니다.');
            return;
          }

          if(localStorage.getItem("LJJumsu") == ""){
            alert('본인,상대 또는 해당 판정을 선택 바랍니다.');
            return;
          }

          //백팀이 점수판의 지도,실격승,반칙승,기권승을 제외한 점수 선택시, 기술체크 필요
          if(
              localStorage.getItem("LJJumsu") != "sd023004" &&
              localStorage.getItem("LJJumsu") != "sd023005" &&
              localStorage.getItem("LJJumsu") != "sd023006" &&
              localStorage.getItem("LJJumsu") != "sd023007" &&
              localStorage.getItem("LJJumsu") != "sd023008" 
             )
          {
            $.each($("input[name='skill_list']:checked"), function() {
                varskilllist += $(this).val()+",";
            });
      
            if (varskilllist =="")
            {
              alert('기술을 선택하세요.');
              return;
            }           
          }

          //선택한 기술 코드
          varskilllist = varskilllist.replace(",","");

          //기술이 조르기거나 꺽기라면 한판만 입력 가능 sp005002 - 조르기, sp005003 - 꺽기
          if (varskilllist == "sp005002" || varskilllist == "sp005003")
          {
            //sd023001 - 한판
            if (localStorage.getItem("LJJumsu") != "sd023001")
            {
              alert("조르기, 꺽기 기술은 한판으로만 입력 가능합니다.");
              return;
            }
          }

          var strtimecheck= "Y";
          var strchecktime="";

          //경기시간 3자리 입력했는지 체크
          $.each($("li[name='gameTime']"), function() {
              if($(this).html() == ""){
                strtimecheck = "N";
                return false;
              }
              else{
                strchecktime += $(this).html();
              }
          }); 

          if (strtimecheck == "N")
          {
            alert('경기시간 3자리를 입력하시기 바랍니다.');
            return;
          }

          // 0 + 1 + : + 23 (01분23초)
          strchecktime = "0" + strchecktime.substring(0,1) + ":" + strchecktime.substring(1,3);

          var obj = {};

          obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
          obj.TeamGb = localStorage.getItem("TeamGb");
          obj.Sex = localStorage.getItem("Sex");
          obj.Level = localStorage.getItem("Level");
          obj.GroupGameGb = localStorage.getItem("GroupGameGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.SportsGb = localStorage.getItem("SportsGb");

          obj.LPlayerIDX = localStorage.getItem("LPlayerIDX");
          obj.LPlayerNum = localStorage.getItem("LPlayerNum");
          obj.RPlayerIDX = localStorage.getItem("RPlayerIDX");
          obj.RPlayerNum = localStorage.getItem("RPlayerNum");

          obj.GroupGameNum = localStorage.getItem("GroupGameNum");

          obj.RGameLevelidx = localStorage.getItem("RGameLevelidx");

          
          
          if (localStorage.getItem("LJGubun") == "L")
          {
            //기술만 들어갔을경우.. 점수없음(윗선수)
            if(localStorage.getItem("LJJumsu") == "sd021001"){
              obj.LJumsuGb = "";
            }
            else{
              obj.LJumsuGb = localStorage.getItem("LJJumsu");
            }

            obj.LLeftRight = localStorage.getItem("SkillLeftRight");
            obj.LSpecialtyGb = varskilllist.substring(0,5); //윗선수 기술구분
            obj.LSpecialtyDtl = varskilllist; //윗선수 기술상세

            obj.RJumsuGb = "";      //아래선수 점수
            obj.RSpecialtyGb = "";  //아래선수 기술구분

          }
          else
          {
            //기술만 들어갔을경우.. 점수없음(아래선수)

            obj.LJumsuGb = "";
            obj.LSpecialtyGb = "";
            obj.LSpecialtyDtl = "";

            if(localStorage.getItem("LJJumsu") == "sd021002"){
              obj.RJumsuGb = "";
            }
            else{
              obj.RJumsuGb = localStorage.getItem("LJJumsu");
            }
            
            obj.RLeftRight = localStorage.getItem("SkillLeftRight");
            obj.RSpecialtyGb = varskilllist.substring(0,5);
            obj.RSpecialtyDtl = varskilllist; 
            
          }

          obj.CheckTime = strchecktime; //경기시간
        
          //연장전 구분값
          if($("#DP_OverTime").attr("class") == "on"){
            obj.OverTime = "1"; 
          }
          else{
            obj.OverTime = "0"; 
          }         

          var jsonData = JSON.stringify(obj);

          var events = "";

          $.ajax({
            url: '/GGame/tblRGameResultDtlInsert.ashx',
            type: 'post',
            data: jsonData,
            success: function (sdata) {
              
              nowscore();
              nowdualresult(); //양선수 부전패,무승부인지 불러오기
              loadplaylog();

              //시간삭제
              display_inputTime('Delete');

              //선택된 기술, 점수, 기술좌우 리셋
              localStorage.setItem("LJGubun","");
              localStorage.setItem("LJJumsu","");
              localStorage.setItem("SkillLeftRight","");

              //기술 체크박스 전체해제
              $.each($("input[name='skill_list']:checked"), function() {
                  
                  $(this).attr('checked', false);
              });    
              
              //기술 체크박스 체크스타일 리셋
              $.each($("label[name='label_skill_list']"), function() {
                  $(this).removeAttr('class');
              });              

              //점수판 체크스타일 리셋
              $.each($("a[name='a_jumsugb']"), function() {
                  $(this).removeAttr('class');
              });   
              
              //연장전 체크박스 해제
              $("#DP_OverTime").attr("class","");



              /*
              var myArr = JSON.parse(sdata);
              
              if (myArr.length > 0){

              } 
              else {
                    
                alert("DB오류");
                return;
                
              }
              */

              defer.resolve(sdata);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
            return defer.promise();     

        }
        //E:기술 입력

        //S:게임로그 삭제
        function delete_gamedtl(stridx, strchecktime){

          var defer = $.Deferred();

          var obj = {};

          obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
          obj.TeamGb = localStorage.getItem("TeamGb");
          obj.Sex = localStorage.getItem("Sex");
          obj.Level = localStorage.getItem("Level");
          obj.GroupGameGb = localStorage.getItem("GroupGameGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.SportsGb = localStorage.getItem("SportsGb");
          obj.GroupGameNum = localStorage.getItem("GroupGameNum");

          obj.Idx = stridx;
          obj.CheckTime = strchecktime;
          
          var jsonData = JSON.stringify(obj);

          $.ajax({
            url: '/GGame/tblRGameResultDtlDelete.ashx',
            type: 'post',
            data: jsonData,
            success: function (sdata) {   

              nowscore();
              loadwinresult(); //현재판정 불러오기
              nowdualresult(); //양선수 부전패,무승부인지 불러오기
              loadplaylog();
              defer.resolve(sdata);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
            return defer.promise();               
        }
        //E:게임로그 삭제

        //S:유도 경기로그 가져오기
        function loadplaylog(){
            var defer = $.Deferred();

            var obj = {};

            obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
            obj.TeamGb = localStorage.getItem("TeamGb");
            obj.Sex = localStorage.getItem("Sex");
            obj.Level = localStorage.getItem("Level");
            obj.GroupGameGb = localStorage.getItem("GroupGameGb");
            obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
            obj.SportsGb = localStorage.getItem("SportsGb");
            obj.GroupGameNum = localStorage.getItem("GroupGameNum");

            var jsonData = JSON.stringify(obj);

            var events = "";

            //승리한 선수가 있다면..
            var arrayWinplayer = winplayer_select();  //승리한 선수 가져오기

            $.ajax({
                url: '/ggame/tblGameResultDtlSelect.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {             

                  var myArr = JSON.parse(sdata);

                  if (myArr.length > 0){
                    
                    var strplaylog = "";

                    for (var i = 0; i < myArr.length; i++)
                    {


                      if(myArr[i].PlayerPosition == "LPlayer"){
                        if (myArr[i].JumsuGb == "")
                        {
                          strplaylog += "<li class='mine-2'>";                        
                        }
                        else
                        {
                          strplaylog += "<li class='mine'>";                        
                        }

                      }
                      else{
                        if (myArr[i].JumsuGb == "")
                        {
                          strplaylog += "<li class='opponent-2'>";                        
                        }
                        else
                        {
                          strplaylog += "<li class='opponent'>";
                        }
                      }
                      
                      strplaylog += "<p>";

                      if(myArr[i].OverTime == "1"){
                        strplaylog +="(연)"
                      }

                      strplaylog += "[<span class='score-time'>";

                      strplaylog += myArr[i].CheckTime + "</span>]<span class='player-name'>" + myArr[i].PlayerName + "</span>";
                      strplaylog += "";

                      if (myArr[i].JumsuGb == "지도")
                      {
                        strplaylog += ": <span class=''>" + myArr[i].JumsuGb +  "</span>";
                      }
                      else{
                        strplaylog += ": <span class=''>" + myArr[i].JumsuGb +  " " + myArr[i].SpecialtyGb + "</span>(<span class='skill'>" + myArr[i].SpecialtyDtl + "</span>)";
                      }
                      
                      /*경기테스트로 인한 임시 권한해제                     
                      if(arrayWinplayer[0] == ""){
                        strplaylog += " <button class='btn btn-del' type='button' onclick=delete_gamedtl('" + myArr[i].Idx + "','" + myArr[i].CheckTime + "') ><i class='fa fa-times' aria-hidden='true'></i>";
                        strplaylog += " <span class='sr-only'>닫기</span></button>";
                      }
                      */
                        strplaylog += " <button class='btn btn-del' type='button' onclick=delete_gamedtl('" + myArr[i].Idx + "','" + myArr[i].CheckTime + "') ><i class='fa fa-times' aria-hidden='true'></i>";
                        strplaylog += " <span class='sr-only'>닫기</span></button>";
                      
                      strplaylog += "</p>";
                      strplaylog += "</li>";

                    }                   
                    

                    $("#DP_result-list").html(strplaylog);

                    $('.btn-del').delList();

                  } else {
                    
                  
                  }

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                
                  defer.reject(errorText);
                }
            });
            return defer.promise();
        }

        //E:유도 경기로그 가져오기


        //S:현재점수 가져오기
        function nowscore(){

          var defer = $.Deferred();

          var obj = {};

          obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
          obj.TeamGb = localStorage.getItem("TeamGb");
          obj.Sex = localStorage.getItem("Sex");
          obj.Level = localStorage.getItem("Level");
          obj.GroupGameGb = localStorage.getItem("GroupGameGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.SportsGb = localStorage.getItem("SportsGb");
          obj.GroupGameNum = localStorage.getItem("GroupGameNum");

          var jsonData = JSON.stringify(obj);

          var events = "";

          $.ajax({
            url: '/GGame/GGameNowScore.ashx',
            type: 'post',
            data: jsonData,
            success: function (sdata) {
  
              var myArr = JSON.parse(sdata);

              if (myArr.length > 0){

                  if (myArr[0].Left01 != "")
                  {

                    //백팀점수판
                    $("#LJumsuGb1").html(myArr[0].Left01);
                    $("#LJumsuGb2").html(myArr[0].Left02);
                    $("#LJumsuGb3").html(myArr[0].Left03);
                    $("#LJumsuGb4").html(myArr[0].Left04);

                    /*
                    //백팀 실격승,반칙승,부전승 체크
                    if( parseInt(myArr[0].Left05) > 0 ){
                      //$("#DP_L_sd019013").attr("class","on");
                      $("#L_gameresult").val("sd023005");
                    }

                    if( parseInt(myArr[0].Left06) > 0 || Number(myArr[0].Right04) >= 4){
                      //$("#DP_L_sd019005").attr("class","on");
                      $("#L_gameresult").val("sd023006");
                    }

                    if( parseInt(myArr[0].Left07) > 0 ){
                      //$("#DP_L_sd019006").attr("class","on");
                      $("#L_gameresult").val("sd023007");
                    }
                    */





                    //청팀점수판
                    $("#RJumsuGb1").html(myArr[0].Right01);
                    $("#RJumsuGb2").html(myArr[0].Right02);
                    $("#RJumsuGb3").html(myArr[0].Right03);
                    $("#RJumsuGb4").html(myArr[0].Right04);

                    /*
                    //백팀 실격승,반칙승,부전승 체크
                    if( parseInt(myArr[0].Right05) > 0 ){
                      //$("#DP_R_sd019013").attr("class","on");
                      $("#R_gameresult").val("sd023005");
                    }

                    if( parseInt(myArr[0].Right06) > 0 ||  Number(myArr[0].Left04) >= 4){
                      //$("#DP_R_sd019005").attr("class","on");
                      $("#R_gameresult").val("sd023006");
                    }

                    if( parseInt(myArr[0].Right07) > 0 ){
                      //$("#DP_R_sd019006").attr("class","on");
                      $("#R_gameresult").val("sd023007");
                    }
                    */

                    
                  }
                  else{
                    //백팀점수판
                    $("#LJumsuGb1").html("0");
                    $("#LJumsuGb2").html("0");
                    $("#LJumsuGb3").html("0");
                    $("#LJumsuGb4").html("0");
                    //$("#DP_L_sd019013").attr("class","");
                    //$("#DP_L_sd019005").attr("class","");
                    //$("#DP_L_sd019006").attr("class","");
                    $("#L_gameresult").val("");

                    //청팀점수판
                    $("#RJumsuGb1").html("0");
                    $("#RJumsuGb2").html("0");
                    $("#RJumsuGb3").html("0");
                    $("#RJumsuGb4").html("0");  
                    //$("#DP_R_sd019013").attr("class","");
                    //$("#DP_R_sd019005").attr("class","");
                    //$("#DP_R_sd019006").attr("class","");
                    $("#R_gameresult").val("");
                  }

              } 
              else {
                    
                //백팀점수판
                $("#LJumsuGb1").html("0");
                $("#LJumsuGb2").html("0");
                $("#LJumsuGb3").html("0");
                $("#LJumsuGb4").html("0");

                //청팀점수판
                $("#RJumsuGb1").html("0");
                $("#RJumsuGb2").html("0");
                $("#RJumsuGb3").html("0");
                $("#RJumsuGb4").html("0");
                
              }

              defer.resolve(sdata);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
            return defer.promise();     

        }
        //E:현재점수 가져오기

        //S:양선수 부전패, 무승부 판정 가져오기
        function nowdualresult(){

          var defer = $.Deferred();

          var obj = {};

          obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
          obj.TeamGb = localStorage.getItem("TeamGb");
          obj.Sex = localStorage.getItem("Sex");
          obj.Level = localStorage.getItem("Level");
          obj.GroupGameGb = localStorage.getItem("GroupGameGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.SportsGb = localStorage.getItem("SportsGb");
          obj.GroupGameNum = localStorage.getItem("GroupGameNum");

          var jsonData = JSON.stringify(obj);

          var events = "";

          $.ajax({
            url: '/GGame/GGameDualResultList.ashx',
            type: 'post',
            data: jsonData,
            success: function (sdata) {
  
              var myArr = JSON.parse(sdata);

              if (myArr.length > 0){

                //양선수 부전패라면..
                if (myArr[0].LPlayerResult == "sd019012")
                {
                  $("#LRResult_Lose").attr("class", "tgClass default on");

                  if(localStorage.getItem("GroupGameGb") == "sd040001")
                  {
                    $("#LRResult_Draw").attr("class", "tgClass no-attend");
                  }
                  else
                  {
                    $("#LRResult_Draw").attr("class", "tgClass draw");
                  }
                }
                //무승부(단체전)라면..
                else if (myArr[0].LPlayerResult == "sd019024")
                {
                  $("#LRResult_Lose").attr("class", "tgClass default");
                  $("#LRResult_Draw").attr("class", "tgClass draw on");           
                }
                //불참(단체전)라면..
                else if (myArr[0].LPlayerResult == "sd019021")
                {
                  $("#LRResult_Lose").attr("class", "tgClass default");
                  $("#LRResult_Draw").attr("class", "tgClass no-attend on");            
                }

              } 
              else {
                    
              
                
              }

              defer.resolve(sdata);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
            return defer.promise();     

        }
        //E:현재점수 가져오기


        //S:경기결과저장(저장버튼 Click)
        function result_save(){
          var defer = $.Deferred();

          //점수 새로 불러오기
          nowscore();
          //판정 불러오기
          loadwinresult();
          //양선수 부전패,무승부인지 불러오기
          nowdualresult();

          var obj = {};

          obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
          obj.TeamGb = localStorage.getItem("TeamGb");
          obj.Sex = localStorage.getItem("Sex");
          obj.Level = localStorage.getItem("Level");
          obj.GroupGameGb = localStorage.getItem("GroupGameGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.SportsGb = localStorage.getItem("SportsGb");
          obj.PlayGround = localStorage.getItem("PlayRound");

          obj.LPlayerIDX = localStorage.getItem("LPlayerIDX");
          obj.LPlayerNum = localStorage.getItem("LPlayerNum");
          obj.RPlayerIDX = localStorage.getItem("RPlayerIDX");
          obj.RPlayerNum = localStorage.getItem("RPlayerNum");

          

          obj.LSchIDX = localStorage.getItem("LSchIDX");
          obj.RSchIDX = localStorage.getItem("RSchIDX");

          obj.LPlayerName = localStorage.getItem("LPlayerName");
          obj.RPlayerName = localStorage.getItem("RPlayerName");

          obj.GroupGameNum = localStorage.getItem("GroupGameNum");
          obj.GroupRound = localStorage.getItem("GroupRound");

          obj.RGameLevelidx = localStorage.getItem("RGameLevelidx");

          $.each($("input[name='StadiumNumber']:checked"), function() {
            obj.StadiumNumber = $(this).val();
          });

          var strmsg = "";

          //각선수 점수
          var str_LJumsuGb1 = $("#LJumsuGb1").html();
          var str_LJumsuGb2 = $("#LJumsuGb2").html();
          var str_LJumsuGb3 = $("#LJumsuGb3").html();
          var str_LJumsuGb4 = $("#LJumsuGb4").html();
          var str_RJumsuGb1 = $("#RJumsuGb1").html();
          var str_RJumsuGb2 = $("#RJumsuGb2").html();
          var str_RJumsuGb3 = $("#RJumsuGb3").html();
          var str_RJumsuGb4 = $("#RJumsuGb4").html();

          
          //각가의 해당판정이 동점이거나, 부전판정이 체크되어있지 않을 시, 경기완료 못시킴;
          if(
            (parseInt($("#LJumsuGb1").html()) == parseInt($("#RJumsuGb1").html()) ) &&
            (parseInt($("#LJumsuGb2").html()) == parseInt($("#RJumsuGb2").html()) ) &&
            (parseInt($("#LJumsuGb3").html()) == parseInt($("#RJumsuGb3").html()) ) &&
            (parseInt($("#LJumsuGb4").html()) == parseInt($("#RJumsuGb4").html()) ) &&

            ($("#L_gameresult").val() == "" && $("#R_gameresult").val() == "" ) &&

            ($("#LRResult_Lose").attr("class") == "tgClass default" && ( $("#LRResult_Draw").attr("class") == "tgClass draw" || $("#LRResult_Draw").attr("class") == "tgClass no-attend" ))
          ){
            alert('경기기록을 완료할 수 없습니다. 점수를 확인해 주시기 바랍니다.');
            //alert($("#DP_L_sd019005").attr("class"));
            return;
          }
          else{
        
                      
          }

          var strResultYN = "";

          //L선수 실격승
          if( strResultYN == "" ){
            //if($("#DP_L_sd019013").attr("class") == "on"){
            if($("#L_gameresult").val() == "sd023005"){
              obj.LPlayerResult = "sd019013";
              obj.RPlayerResult = "";
              strmsg = localStorage.getItem("LPlayerName") + " 선수를 실격(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";      
            }
          }

          //R선수 실격승
          if( strResultYN == "" ){
            //if($("#DP_R_sd019013").attr("class") == "on"){
            if($("#R_gameresult").val() == "sd023005"){
              obj.LPlayerResult = "";
              obj.RPlayerResult = "sd019013";
              strmsg = localStorage.getItem("RPlayerName") + " 선수를 실격(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";      
            }
          }
          //L선수 반칙승
          if( strResultYN == "" ){
            //if($("#DP_L_sd019005").attr("class") == "on"){
            if($("#L_gameresult").val() == "sd023006"){
              obj.LPlayerResult = "sd019005";
              obj.RPlayerResult = "";
              strmsg = localStorage.getItem("LPlayerName") + " 선수를 반칙(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";      
            }
          }
          //R선수 반칙승
          if( strResultYN == "" ){
            //if($("#DP_R_sd019005").attr("class") == "on"){
            if($("#R_gameresult").val() == "sd023006"){
              obj.LPlayerResult = "";
              obj.RPlayerResult = "sd019005";
              strmsg = localStorage.getItem("RPlayerName") + " 선수를 반칙(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";      
            }
          }
          //L선수 부전승
          if( strResultYN == "" ){
            //if($("#DP_L_sd019006").attr("class") == "on"){
            if($("#L_gameresult").val() == "sd023007"){
              obj.LPlayerResult = "sd019006";
              obj.RPlayerResult = "";
              strmsg = localStorage.getItem("LPlayerName") + " 선수를 부전(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";      
            }
          }
          //R선수 부전승
          if( strResultYN == "" ){
            //if($("#DP_R_sd019006").attr("class") == "on"){
            if($("#R_gameresult").val() == "sd023007"){
              obj.LPlayerResult = "";
              obj.RPlayerResult = "sd019006";
              strmsg = localStorage.getItem("RPlayerName") + " 선수를 부전(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";      
            }
          }
          //L선수 기권승
          if( strResultYN == "" ){
            //if($("#DP_L_sd019006").attr("class") == "on"){
            if($("#L_gameresult").val() == "sd023008"){
              obj.LPlayerResult = "sd019022";
              obj.RPlayerResult = "";
              strmsg = localStorage.getItem("LPlayerName") + " 선수를 기권(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";      
            }
          }
          //R선수 기권승
          if( strResultYN == "" ){
            //if($("#DP_R_sd019006").attr("class") == "on"){
            if($("#R_gameresult").val() == "sd023008"){
              obj.LPlayerResult = "";
              obj.RPlayerResult = "sd019022";
              strmsg = localStorage.getItem("RPlayerName") + " 선수를 기권(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";      
            }
          }


          var varLRResult = "";

          if( strResultYN == "" ){
            
            //양선수 부전패,무승부 체크
            if ($("#LRResult_Lose").attr("class") == "tgClass default on")
            {
              obj.LPlayerResult = "sd019012";
              obj.RPlayerResult = "sd019012";
              strmsg = "양선수를 부전(패)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
              strResultYN = "Y";
            }

            if ($("#LRResult_Draw").attr("class") == "tgClass no-attend on" || $("#LRResult_Draw").attr("class") == "tgClass draw on")
            {
              if(localStorage.getItem("GroupGameGb") == "sd040001"){
                obj.LPlayerResult = "sd019021";
                obj.RPlayerResult = "sd019021";
                strmsg = "양선수를 불참으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
                strResultYN = "Y";
              }
              else{
                obj.LPlayerResult = "sd019024";
                obj.RPlayerResult = "sd019024";
                strmsg = "양선수를 무승부로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
                strResultYN = "Y";              
              }
            }
          }

          if (strResultYN == "")
          {

            var strReturn = "";
            var strTitle = "";

            //각선수 한판,절반,유효 점수
            str_LJumsu = $("#LJumsuGb1").html() + $("#LJumsuGb2").html() +  $("#LJumsuGb3").html() +  $("#RJumsuGb4").html();
            str_RJumsu = $("#RJumsuGb1").html() + $("#RJumsuGb2").html() +  $("#RJumsuGb3").html() +  $("#LJumsuGb4").html();

            //한판승
            if( strReturn == "" ){
              if( Number(str_LJumsuGb1) > 0 || Number(str_RJumsuGb1) > 0){
                strReturn = "sd019001";
                strTitle = "한판(승)"
              }
            }

            //절반승
            if( strReturn == "" ){
              if( Number(str_LJumsuGb2) > 0 || Number(str_RJumsuGb2) > 0){
                strReturn = "sd019002";
                strTitle = "절반(승)"
              }
            }

            //유효승
            if( strReturn == "" ){
              if( Number(str_LJumsuGb3) > 0 || Number(str_RJumsuGb3) > 0){
                strReturn = "sd019003";
                strTitle = "유효(승)"
              }
            }
            
            if (strReturn != ""){
              if(Number(str_LJumsu) > Number(str_RJumsu)){
                obj.LPlayerResult = strReturn;
                obj.RPlayerResult = "";
                strmsg = localStorage.getItem("LPlayerName") + " 선수를 " + strTitle + "으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
                strResultYN = "Y";      
              }
              else{
                obj.LPlayerResult = "";
                obj.RPlayerResult = strReturn;            
                strmsg = localStorage.getItem("RPlayerName") + " 선수를 " + strTitle + "으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
                strResultYN = "Y";      
              }
            }
          }

          //각각의 선수 지도가 4개 이상이면 반칙(승), 4개미만이면 우세(승)
  
          
          if( strResultYN == "" ){



            if( Number(str_LJumsuGb4) > Number(str_RJumsuGb4) ){  

                    
              if( Number(str_LJumsuGb4) < 4 && Number(str_LJumsuGb4) > 0)
              {


                if(Number(str_LJumsuGb4) == 1){
                  obj.RPlayerResult = "sd019015";   
                }
                else if(Number(str_LJumsuGb4) == 2){
                  obj.RPlayerResult = "sd019017";   
                }
                else if(Number(str_LJumsuGb4) == 3){
                  obj.RPlayerResult = "sd019019";   
                }
                else{
                  obj.RPlayerResult = "sd019015"; 
                }
                    
                obj.LPlayerResult = "";
                    
                strmsg = localStorage.getItem("RPlayerName") + " 선수를 우세(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";
                strResultYN = "Y";  
              }
            }
            else if( Number(str_LJumsuGb4) < Number(str_RJumsuGb4) ){

                    
              if ( Number(str_RJumsuGb4) < 4 && Number(str_RJumsuGb4) > 0 )
              {


                if(Number(str_RJumsuGb4) == 1){
                  obj.LPlayerResult = "sd019015";   
                }
                else if(Number(str_RJumsuGb4) == 2){
                  obj.LPlayerResult = "sd019017";   
                }
                else if(Number(str_RJumsuGb4) == 3){
                  obj.LPlayerResult = "sd019019";   
                }
                else{
                  obj.LPlayerResult = "sd019015"; 
                }                 

                obj.RPlayerResult = "";         
                strmsg = localStorage.getItem("LPlayerName") + " 선수를 우세(승)으로 기록합니다. 동의하시면 확인버튼을 눌러주세요.";    
                strResultYN = "Y";  
              }
            }
          }

          var jsonData = JSON.stringify(obj);

          console.log(jsonData);

          var events = "";

          //승리한 선수가 있다면..
          /*
          var arrayWinplayer = winplayer_select();  //승리한 선수 가져오기

          if(arrayWinplayer[0] != ""){
            alert("승패가 확정된 라운드는 다시 저장 하실 수 없습니다.");
            return;
          }
          */

          //승패 확인창
          if(!confirm(strmsg)){
            return;
          }


          $.ajax({
            url: '/GGame/tblRGameResultInsert.ashx',
            type: 'post',
            data: jsonData,
            success: function (sdata) {

              console.log(sdata);

              if(sdata == "Insert_Success" || sdata == "Update_Success"){
                alert('경기결과 등록이 완료되었습니다.');

                //진행 중 해제
                localStorage.setItem("GameProgress", "");
                clickBackbtn();
              }
              else{
                alert('경기결과 등록에 실패했습니다.');
              }

              //승리한 선수가 있다면..
              var arrayWinplayer = winplayer_select();  //승리한 선수 가져오기

              if(arrayWinplayer[0] != ""){
                $("#WinPlayer").html("");
                $("#WinPlayer").append("<option value='"+ arrayWinplayer[0] +"'>"+ arrayWinplayer[1] +"</option>");
              }

              /*
              if(arrayWinplayer[0] != ""){
                $("#gameresult").html("");
                $("#gameresult").append("<option value='"+ arrayWinplayer[2] +"'>"+ arrayWinplayer[3] +"</option>");
              }
              */

              loadplaylog();
              
              
              /*
              var myArr = JSON.parse(sdata);

              if (myArr.length > 0){

                  if (myArr[0].Left01 != "")
                  {
                    $("#LJumsuGb1").html(addzero(myArr[0].Left01));
                    $("#LJumsuGb2").html(addzero(myArr[0].Left02));
                    $("#LJumsuGb3").html(addzero(myArr[0].Left03));
                    $("#LJumsuGb4").html(addzero(myArr[0].Left04));
                    $("#RJumsuGb1").html(addzero(myArr[0].Right01));
                    $("#RJumsuGb2").html(addzero(myArr[0].Right02));
                    $("#RJumsuGb3").html(addzero(myArr[0].Right03));
                    $("#RJumsuGb4").html(addzero(myArr[0].Right04));
                  }
                  else{
                    $("#LJumsuGb1").html("00");
                    $("#LJumsuGb2").html("00");
                    $("#LJumsuGb3").html("00");
                    $("#LJumsuGb4").html("00");
                    $("#RJumsuGb1").html("00");
                    $("#RJumsuGb2").html("00");
                    $("#RJumsuGb3").html("00");
                    $("#RJumsuGb4").html("00");               
                  }


              } 
              else {
                    
                $("#LJumsuGb1").html("00");
                $("#LJumsuGb2").html("00");
                $("#LJumsuGb3").html("00");
                $("#LJumsuGb4").html("00");
                $("#RJumsuGb1").html("00");
                $("#RJumsuGb2").html("00");
                $("#RJumsuGb3").html("00");
                $("#RJumsuGb4").html("00");
                
              }
              */

              defer.resolve(sdata);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
            return defer.promise();         
        }
        //E:경기결과저장(저장버튼 Click)

        //S:현재 라운드의 승리자 가져오기
        function winplayer_select(){

          var defer = $.Deferred();

          var obj = {};

          obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
          obj.TeamGb = localStorage.getItem("TeamGb");
          obj.Sex = localStorage.getItem("Sex");
          obj.Level = localStorage.getItem("Level");
          obj.GroupGameGb = localStorage.getItem("GroupGameGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.SportsGb = localStorage.getItem("SportsGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.GroupGameNum = localStorage.getItem("GroupGameNum");

          var jsonData = JSON.stringify(obj);

          var strResult = "";

          var strPlayerIDX = "";
          var strPlayerName = "";
          var strPlayerResult = "";
          var strPubName = "";

          $.ajax({
            url: '/GGame/GGameWinPlayerSelect.ashx',
            type: 'post',
            async:false,
            data: jsonData,
            success: function (sdata) {

              var myArr = JSON.parse(sdata);

              if (myArr.length > 0){

                strPlayerIDX = myArr[0].PlayerIDX;
                strPlayerName = myArr[0].PlayerName;
                strPlayerResult = myArr[0].PlayerResult;
                strPubName = myArr[0].PubName;
                
              } 
              else {
                
              }

              defer.resolve(sdata);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
          
          //return defer.promise();     

          return [strPlayerIDX, strPlayerName, strPlayerResult, strPubName];
        }
        //E:현재 라운드의 승리자 가져오기  


        //S:현재 라운드의 실격승, 반칙승 Log가 있는지 없는지의 Count..
        function nowfoul(){

          var defer = $.Deferred();

          var obj = {};

          obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
          obj.TeamGb = localStorage.getItem("TeamGb");
          obj.Sex = localStorage.getItem("Sex");
          obj.Level = localStorage.getItem("Level");
          obj.GroupGameGb = localStorage.getItem("GroupGameGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.SportsGb = localStorage.getItem("SportsGb");
          obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
          obj.GroupGameNum = localStorage.getItem("GroupGameNum");

          var jsonData = JSON.stringify(obj);

          var strFoulCnt = "";

          $.ajax({
            url: '/GGame/GGameFoulSelect.ashx',
            type: 'post',
            async:false,
            data: jsonData,
            success: function (sdata) {

              var myArr = JSON.parse(sdata);

              if (myArr.length > 0){

                strFoulCnt = myArr[0].FoulCnt;
                
              } 
              else {
                strFoulCnt = "0";
              }

              defer.resolve(sdata);
            },
            error: function (errorText) {
              defer.reject(errorText);
            }
          });
          
          //return defer.promise();     

          return strFoulCnt;
        }
        //E:현재 라운드의 승리자 가져오기  
        

        //S:스코어보드 점수선택
        function jumsu_info(btnobj, strLRgubun, strJumsu){

          
          //Number(nowfoul()) > 0 일때는 실격승,반칙승,부전승 체크가 풀리거나, 체크된 상태가 되지 않아야함
          if(parseInt(Number(nowfoul())) > 0){
            $('.tgClass').addClass('fixed');
            alert('실격승, 반칙승, 부전승 판정이 있는경우, 점수를 더 입력하실 수 없습니다.');
            return;
          }
          //Number(nowfoul()) < 1 일때는 실격승,반칙승,부전승 체크를 자유롭게 할 수 있어야 함
          else{

            $('.tgClass').removeClass('fixed');
          }

          if( Number($("#LJumsuGb4").html()) >= 4 || Number($("#RJumsuGb4").html()) >= 4){
            $('.tgClass').addClass('fixed');
            alert('지도 4회 시, 점수를 더 입력하실 수 없습니다.');
            return;
          }

          if( Number($("#LJumsuGb1").html()) >= 1 || Number($("#RJumsuGb1").html()) >= 1){
            $('.tgClass').addClass('fixed');
            alert('한판 1회 시, 점수를 더 입력하실 수 없습니다.');
            return;
          }

          //해당조건의 반대상황으로 볼것
          if($(btnobj).attr("class") == "on"){
            localStorage.setItem("LJGubun",""); 
            localStorage.setItem("LJJumsu","");                   
          }

          else{
            localStorage.setItem("LJGubun",strLRgubun); 
            localStorage.setItem("LJJumsu",strJumsu);         
          }
                  
        }
        //E:스코어보드 점수선택

        //S:좌,우기술 선택
        function skillleftright_info(strskillleftright){
  
          localStorage.setItem("SkillLeftRight",strskillleftright);
                  
        }
        //E:좌,우기술 선택

        //S:백버튼 Click
        function clickBackbtn(){

          localStorage.setItem("BackPage","enter-score");

          //진행중 코드:sd050001 이면
          if (localStorage.getItem("GameProgress") == "sd050001")
          {
            if(confirm("경기가 진행 중 입니다. 화면이동 시, 해당 경기가 리셋됩니다. 동의 하시면 확인버튼을 눌러주세요."))
            {
              //경기리셋;
              resetgame();
            }
            else{
              return;
            }
          }


          if (localStorage.getItem("GroupGameGb") == "sd040001")
          {
            location.href='RGameList.html';
          }
          else{
            location.href='enter-group.html';         
          }
        }
        //E:백버튼 Click

        //S:홈버튼 Click
        function clickHomebtn(){

          //진행중 코드:sd050001 이면
          if (localStorage.getItem("GameProgress") == "sd050001")
          {
            if(confirm("경기가 진행 중 입니다. 화면이동 시, 해당 경기가 리셋됩니다. 동의 하시면 확인버튼을 눌러주세요."))
            {
              //경기리셋;
              resetgame();
            }
            else{
              return;
            }
          }

          location.href='index.html';     
        
        }
        //S:홈버튼 Click

        //S:시간입력
        function display_inputTime(str){
          if (str == "Delete")
          {
            jQuery.fn.reverse = [].reverse;

            //each문 거꾸로..
            $($("li[name='gameTime']").get().reverse()).each(function() { 
                //if($(this).html() != ""){
                //  $(this).html("");
                //  return false;
                $(this).html("");
                //}
            }); 
                      
          }
          else{
            $.each($("li[name='gameTime']"), function() {
                if($(this).html() == ""){
                  $(this).html(str);
                  return false;
                }
            }); 
          }
        }
        //E:시간입력


        //S:판정선택 - 반칙,실격,부전,기권
        function select_gameresult(str){

          //부전승 일때 숫자 넣어주기 0분00초
          if($("#L_gameresult").val() == "sd023007" || $("#R_gameresult").val() == "sd023007"){

            $.each($("li[name='gameTime']"), function() {
              $(this).html("0")
            }); 
          }

          if(str == "L"){
            $("#R_gameresult").val("");

            localStorage.setItem("LJGubun",str); 
            localStorage.setItem("LJJumsu",$("#L_gameresult").val()); 
          }
          else{
            $("#L_gameresult").val("");
            localStorage.setItem("LJGubun",str); 
            localStorage.setItem("LJJumsu",$("#R_gameresult").val()); 
          }
        }
        //E:판정선택 - 반칙,실격,부전,기권

        //S:경기시작
        function game_start(){
            var defer = $.Deferred();

            var obj = {};

            obj.SportsGb = localStorage.getItem("SportsGb");
            obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
            obj.RGameLevelidx = localStorage.getItem("RGameLevelidx");
            obj.GroupGameNum = localStorage.getItem("GroupGameNum");
            obj.GameNum = localStorage.getItem("PlayerGameNum");

            $.each($("input[name='StadiumNumber']:checked"), function() {
              obj.StadiumNumber = $(this).val();
            });
      

            var jsonData = JSON.stringify(obj);
            
            $.ajax({
                url: '/GGame/GGameNowGameStatus_Insert.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {

                if(sdata == "Insert_False2"){

                  alert("경기시작에 실패했습니다.");

                  $("#btn_gamestart").css("display","none");
                  $("#btn_gameend").css("display","block");
                }
                else{

                  $("#btn_gamestart").css("display","none");
                  $("#btn_gameend").css("display","block");

                  localStorage.setItem("GameProgress","sd050001");
                }

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise();         
        }
        //E:경기시작

        //S:경기리셋
        function resetgame(){

           var defer = $.Deferred();

            var obj = {};

            obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
            obj.RGameLevelidx = localStorage.getItem("RGameLevelidx");
            obj.GroupGameNum = localStorage.getItem("GroupGameNum");
            obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");

            var jsonData = JSON.stringify(obj);
            
            $.ajax({
                url: '/GGame/GGameResultDtlReset.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {

                alert(sdata);

                if(sdata == "DELETE_Success"){

                  alert("경기리셋을 완료하였습니다.");

                }
                else{

                  alert("해당경기를 리셋 할 수 없습니다. 관리자에게 문의 바랍니다.");
                  return;
                }

                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise(); 
        
        } 
        //E:경기리셋

        //S:대전선수명 및 승자 가져오기
        var loadwinresult=function(strPlayerGameNum){
            var defer = $.Deferred();
        
            var obj = {};
        
            obj.GameTitleIDX = localStorage.getItem("GameTitleIDX");
            obj.TeamGb = localStorage.getItem("TeamGb");
            obj.Sex = localStorage.getItem("Sex");
            obj.Level = localStorage.getItem("Level");
            obj.GroupGameGb = localStorage.getItem("GroupGameGb");
            obj.PlayerGameNum = localStorage.getItem("PlayerGameNum");
            obj.GroupGameNum = localStorage.getItem("GroupGameNum");
            obj.SportsGb = localStorage.getItem("SportsGb");
        
            var jsonData = JSON.stringify(obj);
        
            var events = "";
        
            $.ajax({
                url: '/GGame/GGameWinResult.ashx',
                type: 'post',
                data: jsonData,
                success: function (sdata) {
                  
                  var myArr = JSON.parse(sdata);
        
                  if (myArr.length > 0){

                    if(myArr[0].LResult != ""){

                      //좌측선수 반칙,실격,부전/기권 승 selected
                      if(myArr[0].LSkillResult == "sd023005" || myArr[0].LSkillResult == "sd023006" || myArr[0].LSkillResult == "sd023007" || myArr[0].LSkillResult == "sd023008"){

                        $("#L_gameresult").val(myArr[0].LSkillResult);
                      }
                      else{
                        $("#L_gameresult").val("");
                      }
                    }
                    else{
                      $("#L_gameresult").val("");
                    }

                    if(myArr[0].RResult != ""){

                      //우측선수 반칙,실격,부전/기권 승 selected
                      if(myArr[0].RSkillResult == "sd023005" || myArr[0].RSkillResult == "sd023006" || myArr[0].RSkillResult == "sd023007" || myArr[0].RSkillResult == "sd023008"){
                        $("#R_gameresult").val(myArr[0].RSkillResult);
                      }
                      else{
                        $("#R_gameresult").val("");
                      }

                    }
                    else{
                      $("#R_gameresult").val("");
                    }


                  } 
                  
                  else {
                    
                    var varMessage="<span style='font-size:12px;'>해당 경기결과가 없습니다.</span>";
                  }
        
                  defer.resolve(sdata);
                },
                error: function (errorText) {
                  defer.reject(errorText);
                }
            });
            return defer.promise();
        }
        //E:대전선수명 및 승자 가져오기

        $(document).ajaxStart(function() {

          
          apploading("AppBody", "조회 중 입니다.");


        });
        $(document).ajaxStop(function() {

              
          $('#AppBody').oLoader('hide');

        });
                

    </script>
  </head>
  <body id="AppBody">
    <!-- S: header -->
    <div class="header container-fluid">
      <div class="row">
        <div class="pull-left">
          <a onclick="clickBackbtn();" role="button" class="prev-btn">
            <span class="icon-prev">
      <i class="fa fa-angle-left" aria-hidden="true"></i>
    </span>
    <span class="prev-txt">경기스코어 입력</span>
      </a>
        </div>
        <div>
         <h1 class="logo">
          <img src="images/wrestling/header/wrestling-logo@3x.png" alt="대한레슬링협회" width="140" height="37">
        </h1>
        </div>
        <div class="pull-right">
          <span class="sd-logo"><img src="images/tournerment/header/logo@3x.png" alt="스포츠 다이어리" width="100"></span>

          <a onclick="clickHomebtn()" role="button" class="home-link"><span class="icon-home"><i class="fa fa-home" aria-hidden="true"></i></span></a>

        </div>
      </div>
    </div>
    <!-- E: header -->
    
    <!-- S: main -->
    <div class="main container-fluid">
      <!-- S: score-enter -->
      <div class="score-enter row">
          <!-- S: dl 1경기 / 64강 -->
          <dl class="selected-list">
            <dt>매트선택</dt>
            <dd class="place">
              <p><label for="gym1" class="on"><span>A</span><input type="checkbox" id="gym1" name="StadiumNumber" value="1"/></label></p>
              <p><label for="gym2"><span>B</span><input type="checkbox" id="gym2" name="StadiumNumber" value="2"/></label></p>
              <p><label for="gym3"><span>C</span><input type="checkbox" id="gym3" name="StadiumNumber" value="3"/></label></p>
              <p><label for="gym4"><span>D</span><input type="checkbox" id="gym4" name="StadiumNumber" value="4"/></label></p>
            </dd>
            <dd class="play-val"><span id="DP_play-num"><!--1경기--></span> / <span id="DP_play-round"><!--64강--></span></dd>
            <!--<dd class="play-division arrange" id="DP_play-division">개인전 </dd>-->
            <dd class="play-belong arrange" id="DP_play-belong"><!--고등학교--> </dd>
            <dd class="play-type arrange" id="DP_play-type"></dd>
            <!-- <dd class="play-weight arrange" id="DP_play-weight">-66kg </dd> -->
            <dd class="play-title" id="DP_play-title"><!--제9회 청풍기 전국유도대회--></dd>
          </dl>
          <!-- E: dl 날짜/대회명/대회구분 -->
          
          <!-- S: score-enter-main -->
          <div class="score-enter-main clearfix">
            <!-- S: display-board -->
            <div class="display-board">
              <ul class="player-display clearfix">
                <li class="player-1" id="DP_player-name_Up">김재범<span>(비봉고등학교)</span></li>
                <li class="player-2" id="DP_player-name_Down">최보라<span>(중앙여자고등학교)</span></li>
                <li class="v-s">VS</li>
              </ul>
              <!-- S: tech-sel -->
              <ul class="tech-sel clearfix">
                <li class="title">TECHNICAL POINTS</li>
                <li class="select">
                  <!-- bootstrap drop-down select 대체 -->
                  <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">CLASSIFICATION POINTS
                    <span class="caret"></span></button>
                    <ul class="dropdown-menu">
                      <li><a href="#">HTML</a></li>
                      <li><a href="#">CSS</a></li>
                      <li><a href="#">JavaScript</a></li>
                    </ul>
                  </div>
                  <!-- bootstrap drop-down select 대체 -->
                </li>
                <li class="title">TECHNICAL POINTS</li>
              </ul>
              <!-- E: tech-sel -->
              <!-- S: set-count -->
              <ul class="set-count flex">
                <li class="set-1 set-l round-list">
                  <a href="#">
                    <h4>1ST</h4>
                    <p>3</p>
                  </a>
                </li>
                <li class="set-2 set-l round-list">
                  <a href="#" class="on">
                    <h4>2ND</h4>
                    <p>5</p>
                  </a>
                </li>
                <li class="set-total set-l">
                  <h4>SET TOTAL</h4>
                  <p>8</p>
                </li>
                <li class="set-point set-l">
                  <h4>판정점수</h4>
                  <p>4</p>
                </li>
                <li class="set-result">
                  <h4 data-txt="테크니컬승">테크니컬승</h4>
                </li>
                <li class="set-point set-r">
                  <h4>판정점수</h4>
                  <p>0</p>
                </li>
                <li class="set-total set-r">
                  <h4>SET TOTAL</h4>
                  <p>5</p>
                </li>
                <li class="set-r-2 set-r round-list">
                  <a href="#" class="on">
                    <h4>2ND</h4>
                    <p></p>
                  </a>
                </li>
                <li class="set-r-1 set-r round-list">
                  <a href="#">
                    <h4>1ST</h4>
                    <p>4</p>
                  </a>
                </li>
              </ul>
              <!-- E: set-count -->

              <!-- S: input-point -->
              <ul class="input-point flex">
                <li>
                  <a href="#">
                    <h4>5점</h4>
                    <span></span>
                  </a>
                </li>
                <li>
                  <a href="#" class="on">
                    <h4>4점</h4>
                    <span></span>
                  </a>
                </li>
                <li>
                  <a href="#">
                    <h4>2점</h4>
                    <span></span>
                  </a>
                </li>
                <li>
                  <a href="#">
                    <h4>1점</h4>
                    <span></span>
                  </a>
                </li>
                <li class="def flex">
                  <div>
                    <h4>패시브</h4>
                    <span>0</span>
                  </div>
                  <div>
                    <h4>코션</h4>
                    <span class="no-point">-</span>
                  </div>
                  <div>
                    <h4>코션</h4>
                    <span>1</span>
                  </div>
                  <div>
                    <h4>패시브</h4>
                    <span>0</span>
                  </div>
                </li>
                <li>
                  <a href="#">
                    <h4>1점</h4>
                    <span></span>
                  </a>
                </li>
                <li>
                  <a href="#">
                    <h4>2점</h4>
                    <span></span>
                  </a>
                </li>
                <li>
                  <a href="#">
                    <h4>4점</h4>
                    <span></span>
                  </a>
                </li>
                <li>
                  <a href="#">
                    <h4>5점</h4>
                    <span></span>
                  </a>
                </li>
              </ul>
              <!-- E: input-point -->

              <!-- S: skill-btn -->
              <section class="skill-btn clearfix">
                <!-- S: stand-skill -->
                <div class="stand-skill skills">
                  <h4>스탠드 기술</h4>
                  <ul class="clearfix">
                    <li><a href="#">발목 태클</a></li>
                    <li><a href="#" class="on">인사이드 태클</a></li>
                    <li><a href="#">아웃사이드 태클</a></li>
                    <li><a href="#">허리 태클</a></li>
                    <li><a href="#">업어치기</a></li>
                    <li><a href="#">메어 넘기기</a></li>
                    <li><a href="#">안다리 넘기기</a></li>
                    <li><a href="#">허리치기</a></li>
                    <li><a href="#">안아 넘기기</a></li>
                    <li><a href="#">목가아 돌리기</a></li>
                    <li><a href="#">고비</a></li>
                    <li><a href="#">스탠드 기타</a></li>
                    <li><a href="#">정면 태클</a></li>
                    <li><a href="#">밭다리 넘기기</a></li>
                    <li><a href="#">목 태클</a></li>
                    <li><a href="#">팔끌기</a></li>
                    <li><a href="#">엉치걸기</a></li>
                    <li><a href="#">중심 무너뜨리기</a></li>
                  </ul>
                </div>
                <!-- E: stand-skill -->

                <!-- S: time-table -->
                <div class="time-table tab-menu">
                  <ul class="side clearfix tab-list">
                    <li><a href="#" class="on">좌측</a></li>
                    <li><a href="#">우측</a></li>
                  </ul>
                  <ul class="times">
                    <li><a href="#">3:00 ~ 2:01</a></li>
                    <li><a href="#">2:00 ~ 1:01</a></li>
                    <li><a href="#" class="on">1:00 ~ 0:00</a></li>
                  </ul>
                  <!-- S: judge -->
                  <a href="" data-toggle="modal" data-target="#sign-modal" data-whatever="chiefSign">
                    <div class="judge">
                      <h4 class="judge">심판장 승인</h4>
                      <span class="sign-mark" id="chiefSign_copy"></span>
                    
                      <button type="button" class="btn btn-accept" id="btn_chiefSign" style="display:block">강대한 <span class="icon"></span></button>
                    </div>
                  </a>
                  <!-- E: judge -->
                </div>
                <!-- E: time-table -->

                <!-- S: ground-skill -->
                <div class="ground-skill skills">
                  <h4>그라운드 기술</h4>
                  <ul class="clearfix">
                    <li><a href="#">옆 굴리기</a></li>
                    <li><a href="#">팔 잡아 돌리기</a></li>
                    <li><a href="#">하체 돌리기</a></li>
                    <li><a href="#">십자 돌리기</a></li>
                    <li><a href="#">슈가프</a></li>
                    <li><a href="#">잭 나이프</a></li>
                    <li><a href="#">넬슨</a></li>
                    <li><a href="#">목 감아 돌리기</a></li>
                    <li><a href="#">고비</a></li>
                    <li><a href="#">올라타기</a></li>
                    <li><a href="#">그라운드 기타</a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                  </ul>
                </div>
                <!-- E: ground-skill -->
              </section>
              <!-- E: skill-btn -->
          </div>
          <!-- E: score-enter-main -->
        <!-- S: score-record -->
        <div class="score-record">
          <h3>득실기록</h3>
          <!-- S: result-board -->
          <div class="result-board">
            <!-- S: round-2 2nd -->
            <h4>2ND</h4>
            <ul class="round-2 clearfix">
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">목태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/그라운드</span>(<span class="skill">아웃사이드 태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">목태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(4점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">우측/그라운드</span>(<span class="skill">팔 잡아 돌리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">우측/그라운드</span>(<span class="skill">옆 굴리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
            </ul>
            <!-- E: round-2 2nd -->
            
            <!-- S: round-1 1st -->
            <h4>1ST</h4>
            <ul class="round-1 clearfix">
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">목태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">아웃사이드 태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">목태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(4점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">우측/그라운드</span>(<span class="skill">팔 잡아 돌리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">우측/그라운드</span>(<span class="skill">옆 굴리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">목태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">목태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(4점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">우측/그라운드</span>(<span class="skill">팔 잡아 돌리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">목태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-r">
                <p>
                <span class="point">(1점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">중심 무너뜨리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(2점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">좌측/스탠드</span>(<span class="skill">목태클</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
              <li class="opponent player-l">
                <p>
                <span class="point">(4점)</span>[<span class="score-time">3:00~2:01</span>] <br>
                   : <span class="">우측/그라운드</span>(<span class="skill">팔 잡아 돌리기</span>) <a href="#" class="btn btn-del" type="button"><i class="fa fa-times" aria-hidden="true"></i></a>
                </p>
              </li>
            </ul>
            <!-- E: round-1 1st -->
          </div>
          <!-- E: result-board -->
        </div>
        <!-- E: score-record -->
        <!-- S: btn-list -->
        <div class="btn-list">
          <a href="#" class="btn btn-save">경기 종료</a>
        </div>
        <!-- E: btn-list -->
      </div>
      <!-- E: score-enter -->

      <!-- S: 사인 모달 modal -->
      <div class="modal fade" id="sign-modal" tabindex="-1" role="dialog" aria-labelledby="sign-modal-title" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header sign-modal-header">
              <h3 class="modal-title" id="sign-modal-title">승인하기</h3>
            </div>
            <div class="modal-body sign-modal-body">
              

              <!-- 여기에 입력해 주세요. -->
              <div>
               <canvas id="game_signature" width="570" height="250" data-id="">
               </canvas>
              </div>
              <!-- 여기에 입력해 주세요. -->


            </div>
            <div class="modal-footer sign-modal-footer">
              <a onclick="#" role="button" class="btn btn-save" id="signature_copy">승인완료</a>
              <a href="#" role="button" class="btn btn-close" data-dismiss="modal">닫기</a>
            </div>

          </div> <!-- ./ modal-content -->
        </div> <!-- ./modal-dialog -->
      </div>
      <!-- E: 사인 모달 modal -->
      
    </div>
    <!-- E: main -->
    <!-- custom.js -->
    <script src="js/main__wrestling.js"></script>
  </body>
</html>